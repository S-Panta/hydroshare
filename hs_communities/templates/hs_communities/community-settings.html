<form action="/hsapi/_internal/update-user-community/{{ community.id }}" method="POST" enctype="multipart/form-data">
  <legend>Owner Settings</legend>
  {% csrf_token %}
  <div class="row">
    <div class="col-xs-12 col-sm-7 has-space-bottom-2x">
      <div class="row">
        {# Community Name #}
        <fieldset class="col-sm-12">
          <label>Community Name *</label>
          <input type="text" value="{{ community.name }}" class="form-control" required="required" name="name"
            maxlength="79">
          <small class="text-muted">Community name may be 79 characters or less.</small>
        </fieldset>

        <br>
        {# Community Contact Email #}
        <fieldset class="col-sm-12">
          <label>Community Contact Email</label>
          <input class="form-control" type="email" name="email" value="{{ community.email }}"></input>
          <small class="text-muted">An email address for someone in charge of the community.</small>
        </fieldset>

        <br>
        {# Community Url #}
        <fieldset class="col-sm-12">
          <label>Community URL</label>
          <input class="form-control" value="{{ community.url }}" type="url" name="url"></input>
          <small class="text-muted">A URL for a web page that describes the community in more detail.</small>
        </fieldset>

        <br>
        {# Purpose #}
        <fieldset class="col-sm-12">
          <label>Purpose</label>
          <textarea class="form-control" name="purpose" maxlength="300">{{ community.purpose }}</textarea>
          <small class="text-muted">A brief description of the purpose for which the community was created.</small><br>
          <small class="text-muted">300 characters or less.</small>
        </fieldset>

        <br>
        {# Community Description #}
        <fieldset class="col-sm-12">
          <label>About this community *</label>
          <textarea class="form-control" required="required" name="description">{{ community.description }}</textarea>
          <small class="text-muted">A longer text description for the community.</small>
        </fieldset>

        <br>
        {# auto approve membership #}
        <fieldset class="col-sm-12">
          <input id="auto-approve" type="checkbox" {% if community.auto_approve %}checked{% endif %}
            name="auto_approve">
          <label class="checkbox-label" for="auto-approve">Auto approve membership</label><br>
          <small class="text-muted">Choose this option if you want Community membership requests to be automatically
            approved. If you check this box, any HydroShare group that requests membership in the Community will be
            automatically added.</small>
        </fieldset>

        <br>
        {# auto approve resource display #}
        <fieldset class="col-sm-12">
          <input id="auto-approve-r" type="checkbox" {% if community.auto_approve %}checked{% endif %}
            name="auto_approve">
          <label class="checkbox-label" for="auto-approve">Auto approve resource display</label><br>
          <small class="text-muted">Choose this option if you want resources shared with the Community to be
            automatically approved for display on the Community landing page. If you leave this box unchecked, you will
            have to approve any resources shared with the Community before those resources will appear on the
            Community's landing page.</small>
        </fieldset>

        {# Banner image #}
        <fieldset class="has-space-top col-sm-12">
          <label>Add a Custom Banner Image</label>

          <div class="input-group">
            <span class="input-group-btn">
              <span id="cv-custom-upload" class="btn btn-default btn-file">
                Browse&hellip; <input class="upload-picture" type="file" name="banner">
              </span>
            </span>
            <input type="text" class="form-control" readonly>
          </div>
          <small class="text-muted">Add a custom banner image that will display at the top of the Community page. Custom
            banner images must be uploaded in JPEG format and must have dimensions of XXXX X XXXX pixels to display
            correctly.</small>
        </fieldset>

        {# Banner image #}
        <fieldset class="has-space-top col-sm-12">
          <label>Add a Community Logo Image</label>

          <div class="input-group">
            <span class="input-group-btn">
              <span id="cv-custom-upload" class="btn btn-default btn-file">
                Browse&hellip; <input class="upload-picture" type="file" name="picture">
              </span>
            </span>
            <input type="text" class="form-control" readonly>
          </div>
          <small class="text-muted">Add a custom Community logo image that will display at the top of the Community
            page. Custom logo images must be uploaded in JPEG format and must have dimensions of XXXX X XXXX pixels to
            display correctly.</small>
        </fieldset>

        <br>
        <fieldset class="col-sm-12">
          <small class="text-muted">( * ) Required fields</small>
        </fieldset>
        <br>
      </div>

      <button type="submit" class="btn btn-primary">Save Profile Changes</button>
    </div>

    <div class="col-xs-12 col-sm-5 has-space-bottom-2x">
      <fieldset>
        <div class="has-space-bottom">
          <legend class="flex justify-space-between align-center" style="padding-bottom: 1rem;">
            <span>Community Owners</span>
            <button data-toggle="modal" data-target="#community-settings-add-owner"
              class="btn btn-success has-space-left btn-sm">
              <i class="fa fa-plus" aria-hidden="true"></i> Add Owner</button>
          </legend>
        </div>
        {# Owners #}
        <div v-for="owner in community.owners"
          class="flex justify-space-between full-width align-center has-space-bottom">
          <profile-link :user="owner" :key="owner.id" @load-card="loadOwnerCard($event)" :show-details="true">
          </profile-link>
          <profile-card :user="userCardSelected" :position="cardPosition"></profile-card>
          <button type="button" data-toggle="modal" data-target="#remove-community-owner-modal"
            class="btn btn-danger btn-sm" @click="targetOwner = owner"
            :disabled="isRemovingOwner[owner.id] || community.owners.length === 1">Remove</button>
        </div>
      </fieldset>
    </div>
  </div>

  <div class="row">
    <div class="col-xs-12 col-sm-7">
      <fieldset>
        <label>Delete this Community</label>
        <p><small>Deleting a Community does not delete any of the Groups that are members of the Community or the
            resources that have been shared with the Groups. However, once your Community is deleted, it will be gone
            forever. Make sure this is what you want to do!</small></p>
        <br>
        <a href="#" id="btn-delete-community" class="btn btn-danger" data-toggle="modal"
          data-target="#delete-community-dialog">Delete this Community</a>
      </fieldset>
    </div>
  </div>
</form>

<!-- Delete Community Modal -->
<div class="modal fade" id="delete-community-dialog" tabindex="-1" role="dialog" aria-labelledby="Delete">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Cancel"><span
            aria-hidden="true">&times;</span>
        </button>
        <h4 class="modal-title" id="Delete">Delete Group</h4>
      </div>
      <form action="/hsapi/_internal/delete-user-community/{{ community.id }}">
        <div class="modal-body">
          <h5>Are you sure you want to delete this community?</h5>
        </div>

        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
          <button type="submit" class="btn btn-danger">Delete</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Remove Community Owner Modal -->
<div class="modal fade" id="remove-community-owner-modal" tabindex="-1" role="dialog"
  aria-labelledby="removeCommunityOwnerLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content" v-if="targetOwner">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
            aria-hidden="true">&times;</span>
        </button>
        <h4 class="modal-title" id="removeCommunityOwnerLabel">Remove Community Owner</h4>
      </div>
      <div class="modal-body">
        Are you sure you want remove this Community owner?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">
          Cancel
        </button>
        <button class="btn btn-danger" :disabled="community.owners.length === 1 || isRemovingOwner[targetOwner.id]"
          @click="removeOwner(targetOwner.id)">Remove
        </button>
      </div>
    </div>
  </div>
</div>